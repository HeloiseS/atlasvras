
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Monitoring with El01z &#8212; ATLAS VRAs unknown documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=4e48d009"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'el01z';</script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ATLAS VRAs Manual" href="manual.html" />
    <link rel="prev" title="Training the models" href="training.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="ATLAS VRAs unknown documentation - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="ATLAS VRAs unknown documentation - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">TL;DR</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="eyeball.html">Cheat Sheet</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The Deets</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="about.html">The VRA</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">The Data</a></li>


<li class="toctree-l1"><a class="reference internal" href="training.html">Training</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Monitoring</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">For Devs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="manual.html">Manual</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/el01z.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Monitoring with El01z</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#weekly-reports">Weekly Reports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#monitoring-purgatory">Monitoring Purgatory</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparing-old-and-new-models">Comparing Old and New Models</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="monitoring-with-el01z">
<h1>Monitoring with El01z<a class="headerlink" href="#monitoring-with-el01z" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">el01z</span></code> is the bot that monitors the behaviour of the VRA.
It’s actually currently <strong>3 different bots</strong> (as in three separate scripts)
that have slightly different purposes</p>
<ol class="arabic simple">
<li><p><strong>Weekly reports</strong></p></li>
<li><p><strong>Monitoring purgatory</strong></p></li>
<li><p><strong>Comparing old and new models</strong></p></li>
</ol>
<p>The first bot will be a permanent fixture although the body of the reports
may evolve. The other two are dev helpers that will be turned off
eventually.</p>
<section id="weekly-reports">
<h2>Weekly Reports<a class="headerlink" href="#weekly-reports" title="Link to this heading">#</a></h2>
<p>Every Friday before the data wrangling meeting, <code class="docutils literal notranslate"><span class="pre">el01z</span></code> will generate a report
to the <code class="docutils literal notranslate"><span class="pre">#vra-forum</span></code> channel which is meant for the whole QUB team.
It will tell you:</p>
<ul class="simple">
<li><p>The number of eyeballed objects</p></li>
<li><p>The number of objects with RB &gt; 0.2</p></li>
<li><p>The number of objects that were found first by us</p></li>
<li><p>The number of objects that were found by others</p></li>
<li><p>The number of potential misses</p></li>
<li><p>Uploads a pie chart of the distribution of alert types labeled this week</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Potential misses are defined as alerts that the VRA scored too low to be eyeballed
but were already in TNS. These are <strong>not necessarily</strong> misses since some
TNS crossmatches are bad, old, or simply because in ATLAS the object
is simply so faint we can’t expect the VRA to catch it (that’s why we update
the VRA ranks with cross-matching).</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">el01z</span></code> will also send a message to <code class="docutils literal notranslate"><span class="pre">#vra-dev</span></code> and save some data to
a csv. For details, check the top of the docstring in
<code class="docutils literal notranslate"><span class="pre">atlasvras/el01z/weeklyreport.py</span></code></p>
</section>
<section id="monitoring-purgatory">
<h2>Monitoring Purgatory<a class="headerlink" href="#monitoring-purgatory" title="Link to this heading">#</a></h2>
<dl class="simple">
<dt>Purgatory</dt><dd><p>Objects that are stuck in the eyeball list because their rank is too high to be
garbaged but too low to be eyeballed are in <em>purgatory</em>.</p>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Remember that the <code class="docutils literal notranslate"><span class="pre">dayN</span></code> models are only trained with data up to
15 days after the initial alert. So there is little point (in fact it’d be reckless)
giving the VRA data for objects that fall outside of its training window.</p>
</div>
<p>If alerts are still in purgatory after that 15 day window they must be looked at.
Once a week, just before the weekly report, <code class="docutils literal notranslate"><span class="pre">el01z</span></code> will generate a list of
objects in purgatory that are past that 15 day “best-by” date
and send it to the <code class="docutils literal notranslate"><span class="pre">#vra-dev</span></code> channel so I can eyeball them.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Eventually I <em>will</em> add a new garbage collecting policy to get rid of the
purgatory concept. The reason it exists is that I was panicked at the idea
of garbaging an alert that was actually real.</p>
</div>
</section>
<section id="comparing-old-and-new-models">
<h2>Comparing Old and New Models<a class="headerlink" href="#comparing-old-and-new-models" title="Link to this heading">#</a></h2>
<p>We added the new <code class="docutils literal notranslate"><span class="pre">Crabby</span></code> models in production on <code class="docutils literal notranslate"><span class="pre">2024-12-06</span></code>.
We want to compare to previous models to:
1. See how much more awesome they are
2. Avoid binning something interesting if I messed up.</p>
<p>The compare-bot runs once a day currently and sends to the
<code class="docutils literal notranslate"><span class="pre">#vra-dev</span></code> channel two lists:</p>
<ol class="arabic simple">
<li><p>The <em>would-not-have-been-garbaged</em> alerts. That is those which
would not have met the auto-garbaging policies in the old model.
I eyeball each of these to see if there is any reason to doubt.</p></li>
<li><p>The <em>danger-zone</em> alerts: Those that would have been eyeballed
under the old scheme but are not being eyeballed now. I eyeball them
to see if we might have missed something.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>“What about the alerts that would NOT have been eyeballed in the old model?”</em>
Well those are being eyeballed by the other eyeballers. After a few weeks I
will take a look and see if we are sending too many extra alerts for eyeballing and
can cut back further.</p>
</div>
<p>The compare-bot also saves a few things to a  file to allow me to do some
comparison plots in a few weeks:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rank_NEW</span></code>: the rank given by the new model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rank_OLD</span></code>: the rank given by the old model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">garbage_flag</span></code>: whether the object was garbaged (rank = -1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_bot</span></code>: the timestamp of the bot run</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="training.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Training the models</p>
      </div>
    </a>
    <a class="right-next"
       href="manual.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ATLAS VRAs Manual</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#weekly-reports">Weekly Reports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#monitoring-purgatory">Monitoring Purgatory</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparing-old-and-new-models">Comparing Old and New Models</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Heloise Stevance
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Heloise Stevance.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>